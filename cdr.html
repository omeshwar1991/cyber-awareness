<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <title>ProbeMind - CDR Analysis</title>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
    <script
      type="text/javascript"
      src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <link
      href="https://unpkg.com/vis-network/styles/vis-network.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@zip.js/zip.js/dist/zip.js"></script>

  <style>
    :root { --header-h: 64px; --footer-h: 44px; }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif; color: #000000; background: #0b0f16; overflow: hidden; }
    #bg { position: fixed; inset: 0; z-index: 0; background: radial-gradient(1200px 800px at 50% 50%, #0e1624 0%, #0b0f16 60%, #070a0f 100%); }
    header, footer {
      position: fixed; left: 0; right: 0; z-index: 2;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border-bottom: 1px solid rgba(255,255,255,0.06);
	  
    }
    header { top: 0; height: var(--header-h); display: flex; align-items: center; padding: 0 16px; }
    footer { bottom: 0; height: var(--footer-h); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; border-top: 1px solid rgba(255,255,255,0.08); border-bottom: none; }
    .brand { font-weight: 800; letter-spacing: 0.5px; font-size: 18px; margin-right: 16px; white-space: nowrap; }
    nav a { color: #eaeaea; text-decoration: none; margin: 0 10px; padding: 8px 12px; border-radius: 999px; }
    nav a:hover { background: rgba(255,255,255,0.08); }
    nav a.active { background: #14b8a6; color: #021012; }
    main { position: relative; z-index: 1; height: calc(100% - var(--header-h) - var(--footer-h)); margin-top: var(--header-h); margin-bottom: var(--footer-h); overflow: auto; }
    .wrap { max-width: 900px; margin: 0 auto; padding: 28px 16px 40px; }
    .panel { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.09); border-radius: 20px; padding: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.06); }
    h1 { margin: 10px 0 18px; font-size: clamp(22px, 3.6vw, 34px); }
    .row { display: flex; gap: 10px; flex-wrap: wrap; }
    input[type="text"] {
      flex: 1 1 280px; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.18); background: rgba(0,0,0,0.35); color: #eaeaea; font-size: 16px; outline: none;
    }
    button {
      padding: 12px 16px; border-radius: 12px; background: #14b8a6; color: #041012; border: none; font-weight: 700; cursor: pointer; transition: transform .15s ease, box-shadow .2s ease;
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(20,184,166,0.25); }
    .result { margin-top: 16px; white-space: pre-wrap; background: rgba(20,184,166,0.08); border: 1px solid rgba(20,184,166,0.35); padding: 16px; border-radius: 14px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .hint { color: #9db0c6; font-size: 14px; margin-top: 8px; }
    .footer-left, .footer-right { font-size: 13px; color: #cfd8e3; }
    a { position: relative; z-index: 3; }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    .fileControl {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      h1 {
        text-align: center;
        color: #adadad;
        margin-left: 10px;
        margin: auto;
      }
      input[type="file"] {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #fff;
        margin: auto;
      }
      .export {
        margin: auto;
      }
      .tab {
        display: inline-block;
        padding: 5px 10px;
        margin: 2px;
        border-radius: 5px;
        cursor: pointer;
      }
      .sub-tab {
        display: inline-block;
        padding: 5px 10px;
        margin-right: 2px;
        margin-left: 5px;
        margin-bottom: 2px;
        background-color: #162942;
        color: rgb(0, 0, 0);
        border-radius: 5px;
        cursor: pointer;
		color: white;
      }
      .sub-tab.active {
        background-color: #248c79;
        color: rgb(255, 255, 255);
        font-weight: bold;
      }
      table {
        border-collapse: collapse;
        height: fit-content;
        margin-top: 10px;
        margin-right: 50px;
        margin-bottom: 10px;
        margin-left: 10px;
        background-color: #fff;
        table-layout: auto;
		color:black;
      }
      th,
      td {
        border: 1px solid #dee2e6;
        padding: 5px;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        min-width: 50px;
        max-width: 200px;
      }
      th {
        background-color: #000000;
        color: white;
      }
      td:hover {
        overflow: visible;
        white-space: normal;
        max-width: none;
      }
      .scroll-buttons {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .scroll-buttons button {
        padding: 10px;
        background-color: rgba(233, 200, 200, 0.2);
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }
      .dropdown-menu {
        position: absolute;
        display: none;
        background-color: #f1f1f1;
      }
      .dropdown-menu div {
        padding: 8px 16px;
        cursor: pointer;
      }
      .dropdown-menu div:hover {
        background-color: #ddd;
      }
    
      .container {
        width: 100%;
        margin: 0 auto;
        display: flex;
        justify-content: center;
      }
      .menu {
        list-style: none;
        display: flex;
        gap: 5px;
      }
      .menu li a {
        color: #ffffff;
        text-decoration: none;
        font-weight: bold;
        padding: 5px 5px;
        border-radius: 5px;
        background: rgb(46, 34, 212);
        transition: background-color 0.5s ease, transform 0.3s, box-shadow 0.3s;
        text-align: center;
        display: inline-block;
      }
      .menu li a:hover {
        background-color: rgba(145, 25, 201, 0.2);
      }
      .menu li a:hover {
        color: #e0e0e0;
        background-color: #00025a;
      }
      .radio-buttons-container {
        display: flex;
        justify-content: flex-start;
        margin-bottom: 10px;
      }
      .radio-buttons-container label {
        margin: 0 10px;
        font-weight: bold;
      }
      .radio-buttons-container input[type="radio"] {
        margin-right: 5px;
      }
      #table-container {
        height: calc(100vh - 200px);
        overflow: auto;
        position: relative;
        display: flex;
        flex-direction: column;
      }

      #cleaned-data {
        border-collapse: collapse;
      }

      #cleaned-data th,
      #cleaned-data td {
        border: 1px solid #dee2e6;
        padding: 5px;
        text-align: center;
        white-space: nowrap;
      }

      #cleaned-data th {
        position: sticky;
        top: 0;
        background-color: #141414;
        color: white;
        z-index: 1;
      }
      #table-data {
        display: flex;
      }
      #map {
        height: 100vh;
        width: 100%;
        display: none;
      }
      #cleaned-data tr:hover {
        cursor: pointer;
      }
      #distance-button {
        margin: 10px;
      }
      .common-bubble {
        position: relative;
        cursor: pointer;
      }
      .tooltip {
        display: none;
        position: absolute;
        background: #333;
        color: #fff;
        padding: 5px;
        border-radius: 3px;
        z-index: 1000;
      }
      .common-bubble:hover .tooltip {
        display: block;
      }
      .bubbles-container.hidden {
        display: none;
      }

      
	  
	  
	  
	  
	  
	  
  .dropbtn {
  width: auto;                    /* Auto width */
  background-color: transparent;  /* Transparent background */
  color: white;                   /* White text */
  border: 2px solid white;        /* White border */
  padding: 10px 15px;             /* Spacing for better look */
  font-size: 16px;
  cursor: pointer;
  border-radius: 5px;             /* Optional: rounded corners */
}

.dropbtn:hover {
  background-color: rgba(255, 255, 255, 0.1); /* Light hover effect */
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #222;     /* Dropdown background */
  min-width: 160px;
  border: 1px solid white;
  z-index: 1;
}

.dropdown-content a {
  color: white;
  padding: 8px 12px;
  display: block;
  text-decoration: none;
}

.dropdown-content a:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

/* Show dropdown when active */
.show {
  display: block;
}








      .show {
        display: block;
      }

      #commonBPartyChart {
        width: 1000px;
        height: 1200px;
		}
		#file-input {
  width: auto;               /* Auto width */
  background-color: transparent; /* Transparent background */
  color: white;              /* White text color */
  border: 2px solid white;   /* White border to make it visible */
  padding: 10px;             /* Add some padding for better visual */
  font-size: 16px;           /* Set font size */
  cursor: pointer;          /* Pointer cursor on hover */
}
/* Optional: Make the input more customizable when focusing */
#file-input:focus {
  outline: none;             /* Remove outline when focused */
  border-color: #00f;        /* Add a blue border when focused */
}
  </style>
   <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl_O2JlHlk8MCvAFI2ZMEoLtMvf27revc&libraries=geometry"
      defer
    ></script>
</head>
<body>
  <canvas id="bg"></canvas>

  <header>
    <div class="brand">ProbeMind</div>
    <nav>
      <a href="index.html">Home Page</a>
      <a href="ifsc.html">IFSC Search</a>
      <a href="ip.html">IP Lookup</a>
      <a href="tower.html">Tower Search</a>
      <a class="active" href="cdr.html">CDR Analysis</a>
      
    </nav>
  </header>

  <main>
    <div class="wrap">
      <div class="panel">
        <h1>CDR Analysis</h1>
        <div class="row">
        </div>
       <div class="fileControl">
      <input
        type="file"
        id="file-input"
        accept=".csv, .xlsx, .xlx, .zip"
        multiple
      />
	  
	 
							  <div class="dropdown">
								<button onclick="toggleDropdown()" class="dropbtn">Download CDR File</button>
								
								<div id="myDropdown" class="dropdown-content">
								  <a href="#" onclick="exportActiveAnalysisTab()">Export Selected Tab</a>
								  <a href="#" onclick="exportActiveFileTab()">Export Selected File</a>
								  <a href="#" onclick="exportAllFileTabs()">Export All File</a>
								</div>
								
							  </div>
							 
							</div>
						    
							
							  
		  <div class="hint">Tip: Upload a CDR file (e.g. One or more *.csv, *.xlsx, *.zip)</div>
        <div id="out" class="result" hidden></div>
      </div>
	  
    </div>
	
	<div>
	

	
	
	
	
	 					  
							<div id="tabs"></div>
						   
							<div id="sub-tabs"></div>
						   
							<div id="table-container">
							  <div id="table-data">
								<table id="cleaned-data"></table>
								<div id="map"></div>
							  </div>
							  <div class="scroll-buttons">
								<button id="scroll-up">??</button>
								<button id="scroll-down">??</button>
							  </div>  
							  
							  
							  
							  
							  
							  
							  
    </div>	
  </main>

  <footer>
    <div class="footer-left">Â© 2025 ProbeMind.in</div>
    <div class="footer-right">Developed by Omeshwar Vankar</div>
  </footer>
  <script src="script.js"></script>
  <script>
    // Particle background
    (function () {
      const canvas = document.getElementById('bg');
      const ctx = canvas.getContext('2d');
      let w, h, particles = [], mouse = { x: null, y: null }, maxDist = 140;

      function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        const targetCount = Math.min(160, Math.floor((w * h) / 12000));
        if (particles.length < targetCount) {
          while (particles.length < targetCount) particles.push(newParticle());
        } else {
          particles.length = targetCount;
        }
      }
      function newParticle() {
        return { x: Math.random() * w, y: Math.random() * h, vx: (Math.random() - 0.5) * 0.6, vy: (Math.random() - 0.5) * 0.6, r: 1 + Math.random() * 2 };
      }
      function step() {
        ctx.clearRect(0, 0, w, h);
        for (let i = 0; i < particles.length; i++) {
          const p = particles[i]; p.x += p.vx; p.y += p.vy;
          if (p.x < 0 || p.x > w) p.vx *= -1; if (p.y < 0 || p.y > h) p.vy *= -1;
          if (mouse.x !== null) {
            const dx = mouse.x - p.x, dy = mouse.y - p.y, d2 = dx * dx + dy * dy;
            if (d2 < maxDist * maxDist) {
              const f = 0.0008; p.vx += dx * f; p.vy += dy * f;
            }
          }
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2); ctx.fillStyle = 'rgba(180,220,255,0.75)'; ctx.fill();
          for (let j = i + 1; j < particles.length; j++) {
            const q = particles[j]; const dx = p.x - q.x, dy = p.y - q.y; const dist = Math.hypot(dx, dy);
            if (dist < maxDist) {
              const a = 1 - (dist / maxDist);
              ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(q.x, q.y);
              ctx.strokeStyle = 'rgba(80,180,170,' + (a * 0.6) + ')';
              ctx.lineWidth = 1; ctx.stroke();
            }
          }
        }
        requestAnimationFrame(step);
      }
      window.addEventListener('resize', resize);
      window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
      window.addEventListener('mouseleave', () => { mouse.x = mouse.y = null; });
      resize(); step();
    })();

  
  </script>
</body>
</html>
