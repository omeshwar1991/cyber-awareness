<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Popup with Spider Web Background & Loading Overlay</title>
 <link rel="stylesheet" href="style.css">

<style>

  /* Button to open popup */
  #openBtn {
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 10px 20px;
    border:none;
    border-radius:8px;
    background:#007aff;
    color:#fff;
    cursor:pointer;
    z-index: 11;
  }

  /* Fullscreen loading overlay */
  #loadingOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 20;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
  }
  #loadingOverlay.active {
    opacity: 1;
    pointer-events: all;
  }

  /* Loading spinner */
  .spinner {
    border: 6px solid rgba(255, 255, 255, 0.2);
    border-top-color: #007aff;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
</style>
</head>
<body>
<canvas id="spiderCanvas"></canvas>

<button id="openBtn">Open Mac OS Style Form</button>

<!-- Backdrop -->
<div class="backdrop" id="backdrop"></div>

<!-- Popup Form -->
<div class="popup" id="popupForm">
  <span class="close-btn" id="closeBtn">&times;</span>
  <h2>Feedback Form</h2>
  <form>
    <label for="name">Name</label>
    <input type="text" id="name" placeholder="Enter your name" required />
    
    <label for="email">Email</label>
    <input type="email" id="email" placeholder="Enter your email" required />
    
    <label for="message">Message</label>
    <textarea id="message" rows="4" placeholder="Write your message..." required></textarea>
    
    <button type="submit">Submit</button>
  </form>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay" aria-live="polite" aria-label="Loading">
  <div class="spinner" role="status" aria-hidden="true"></div>
</div>

<script>
  // Popup open/close logic
  const openBtn = document.getElementById("openBtn");
  const popup = document.getElementById("popupForm");
  const closeBtn = document.getElementById("closeBtn");
  const backdrop = document.getElementById("backdrop");
  const loadingOverlay = document.getElementById("loadingOverlay");

  openBtn.addEventListener("click", () => {
    popup.classList.add("active");
    backdrop.classList.add("active");
  });

  function closePopup() {
    popup.classList.remove("active");
    backdrop.classList.remove("active");
  }

  closeBtn.addEventListener("click", closePopup);
  backdrop.addEventListener("click", closePopup);

  window.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && popup.classList.contains("active")) {
      closePopup();
    }
  });

  // Show loading overlay on form submit
  const form = popup.querySelector('form');
  form.addEventListener('submit', e => {
    e.preventDefault();

    loadingOverlay.classList.add('active');

    // Simulate loading for 3 seconds
    setTimeout(() => {
      loadingOverlay.classList.remove('active');
      closePopup();
      alert('Form submitted!');
      form.reset();
    }, 3000);
  });
</script>
<script>
  // Your existing spider web background code
  const canvas = document.getElementById('spiderCanvas');
  const ctx = canvas.getContext('2d');
  let width = window.innerWidth;
  let height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;

  const numPoints = 100;
  const maxDist = 120;

  class Point {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.baseX = x;
      this.baseY = y;
      this.vx = (Math.random() - 0.5) * 0.3;
      this.vy = (Math.random() - 0.5) * 0.3;
      this.radius = 2;
    }

    update() {
      this.x += this.vx;
      this.y += this.vy;

      if (this.x < this.baseX - 15 || this.x > this.baseX + 15) this.vx *= -1;
      if (this.y < this.baseY - 15 || this.y > this.baseY + 15) this.vy *= -1;

      this.x = Math.min(Math.max(this.x, 0), width);
      this.y = Math.min(Math.max(this.y, 0), height);
    }

    draw() {
      ctx.beginPath();
      ctx.fillStyle = '#00ff99';
      ctx.shadowColor = '#00ff99';
      ctx.shadowBlur = 5;
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();
    }
  }

  const points = [];
  for (let i = 0; i < numPoints; i++) {
    const px = Math.random() * width;
    const py = Math.random() * height;
    points.push(new Point(px, py));
  }

  const mousePoint = new Point(width / 2, height / 2);
  mousePoint.radius = 4;

  window.addEventListener('resize', () => {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  });

  window.addEventListener('mousemove', (e) => {
    mousePoint.x = e.clientX;
    mousePoint.y = e.clientY;
  });

  function distance(p1, p2) {
    return Math.hypot(p1.x - p2.x, p1.y - p2.y);
  }

  function drawLine(p1, p2, alpha) {
    ctx.strokeStyle = `rgba(0, 255, 153, ${alpha})`;
    ctx.lineWidth = 1;
    ctx.shadowColor = 'rgba(0, 255, 153, 0.7)';
    ctx.shadowBlur = 3;
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.stroke();
    ctx.closePath();
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);

    points.forEach(point => {
      point.update();
      point.draw();
    });

    mousePoint.draw();

    for(let i = 0; i < points.length; i++) {
      for(let j = i + 1; j < points.length; j++) {
        const dist = distance(points[i], points[j]);
        if(dist < maxDist) {
          const alpha = 1 - dist / maxDist;
          drawLine(points[i], points[j], alpha);
        }
      }
      const distMouse = distance(points[i], mousePoint);
      if(distMouse < maxDist) {
        const alpha = 1 - distMouse / maxDist;
        drawLine(points[i], mousePoint, alpha);
      }
    }

    requestAnimationFrame(animate);
  }

  animate();

  // Toggle forms
  const loginForm = document.getElementById('loginForm');
  const signupForm = document.getElementById('signupForm');
  const showSignup = document.getElementById('showSignup');
  const showLogin = document.getElementById('showLogin');

  showSignup.addEventListener('click', () => {
    loginForm.style.display = 'none';
    signupForm.style.display = 'block';
  });

  showLogin.addEventListener('click', () => {
    signupForm.style.display = 'none';
    loginForm.style.display = 'block';
  });

  // Example form submit handlers
  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    alert(`Logging in with Email: ${loginForm.loginEmail.value}`);
  });

  signupForm.addEventListener('submit', (e) => {
    e.preventDefault();
    alert(`Signing up with Email: ${signupForm.signupEmail.value} and Name: ${signupForm.signupName.value}`);
  });
</script>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
